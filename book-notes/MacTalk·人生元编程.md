## MacTalk·人生元编程
> 池建强

### 内容提要

作者以一个70后程序员的笔触，立于Mac之上，讲述技术与人文的故事，有历史，有明天，有技术，有人生。

### 开篇：为何而写

写作即思考。写作其实就代表思考，你需要言之有物，需要架构、需要梳理，要有开端、有结尾、有结论、有主题，特别神奇的是你构思了一篇文章。

### Mac

开天辟地的是Apple I，居功至伟的是Apple II，后面写沃兹小传的时候会提到，这两个神作都是沃兹单枪匹马做出来的，乔布斯也就是焊焊板子买点披萨什么的。

具体原则就是永远去满足最需要内存的程序，当内存告急的时候，系统就会根据时间顺序去寻找那些不活跃程序的内存，将其压缩到一半大小，然后把内存倒出来给最需要的程序。当这些被压缩了内存的程序活跃起来的时候，系统会以最快的速度释放内存，让你切换程序毫无顿挫的感觉。

Mavericks的内存压缩采用了WKdm算法（http://terpconnect.umd.edu/～barua/matt-compress-tr.pdf），这个算法巨牛无比，压缩和解压缩可以说唯快不破。我查了上面提到的论文，这算法也有年头了，不知道为什么现在才翻出来使用。这种压缩技术比硬盘Swap交换技术要快，即使是SSD硬盘也无法比拟。内存压缩的使用，在增加内存使用效率的同时，还减少了硬盘的读写次数和CPU的占用率。另外，与传统的虚拟内存技术不同，这玩意儿还能充分利用多核CPU的特性，实在是牛到逆天。

### Mac Tips

打开“系统偏好设置”→“网络”，单击“位置”下拉菜单，找到“编辑位置”，打开后即可增删编辑多套网络设置，设置完成后保存。

### 程序员与编程

元在英文里就是meta，元编程就是meta programming，元数据就是meta data。元编程就是能够操作代码的代码，元数据就是能够描述数据的数据。

具备元编程的语言就具备更强大的操控自己的能力，可以自省，可以反射，可以动态改变和控制自己；具备人生元编程能力的人，同样有自省能力，随时检查和控制自身的情绪和行为，思考自己的想法，改变大脑的动机。

.遇到问题不要急着问别人，在时间允许的情况下看是否自己能够解决，一方面锻炼自己分析问题和解决问题的能力，另一方面，一旦问题解决了，问题就不是问题，而是你的经验和知识库。况且现在互联网有那么多的技术资料和各类问答网站，想碰到一个别人没碰到的问题，已经非常困难了。

inode元信息
上一篇文章中我们讲到了索引节点inode，每个文件都有一个唯一的inode对象，描述了文件的元信息。inode与文件是生死相依、一损俱损的关系，生命周期一致。很

stat命令来查看真实文件的inode信息。打开终端，找到一个文件输入：
￼
    ＞stat .zshrc

如何查看inode的使用情况呢？可以执行如下命令：
￼
    df -iH￼

如果你的系统里小文件非常多的话，那么完全有可能发生这样的情况：在磁盘空间还有剩余的时候，不能创建文件。这时候就要用df-iH命令看一下是否inode对象已经把索引节点区占满了。一旦无法创建inode，无论是文件还是目录，都将无法创建！


◆套接字（socket），也是一种文件类型，可以用于进程间的网络通信，也可以用于本机之间的非网络通信。比如你会时不时见到后缀为sock的进程文件，这些文件一般隐藏在/var/run目录下，它们活跃在服务器里，证明着那些相关进程的存在。

如何创建一个硬链接文件？非常简单：
￼
    ln sourcefile destfile
其中，前者是源文件，后者是目标文件。创建完成后，使用stat命令查看其中之一，就会发现Links的值变为2了，用ls-i查看文件，你会发现这两个文件的inode号是相同的。

硬链接的应用场景比较广泛，比如多人修改同一个文件、重要文件备份、文件更新、节省磁盘空间等。这些方便的特性都源于inode的设计思想。

创建软链接的命令如下：
￼
    ln -s sourcefile destfile
大家可以尝试用stat命令查看这两个文件的inode信息。
软链接可以创建目录的软链接，也能跨文件系统存在，在Linux系统中被大量使用。一旦源文件/目录不存在了，软链接的使命也就完结了。

### 科技与人文

由此我也想明白了一个道理，通晓天下武功而百无一用，其实和不出家门的书生也没太大区别；学尽世上技术但做不出成功的产品，一样是毫无意义。所谓知行合一，实在缺一不可！

从做工具和使用工具这两件事的认知程度上来说，前者更容易知其所以然。从长远来看，个人以为工具和平台是推动人类发展的原动力，业务和应用则构建于工具和平台之上，相辅相成。
以前我说过一句：“阿里玩的是平台，顺道把电商做了；京东玩的就是电商，顺手搞搞技术”，大概表达的也是这个意思（当然京东现在也开始做平台了）。你以为阿里在做电商，其实人家在做电商平台，你以为苹果在做电脑和手机，其实人家在打造App平台。

总结一下，今天的话题是去做工具，并用好工具。

我个人就经历过类似的痛苦，不过现在我已经能够非常坦然地向团队成员请教问题了，因为技术领导需要的是敏锐的技术嗅觉和前瞻性、规划能力、解决问题的能力、组织协调的能力等，而不是去掌握团队使用的所有技术。

当然，网络也是个时间大杀器，同样需要控制。但网络比电视好一点，至少具备互动性，看的人至少是在主动获取内容。
如果你现在正躺在沙发上看电视，那么最好关掉电视，好好去读一本书。

斯托曼说：“我们的社会正越来越依赖计算机，我们使用的软件对保证未来社会的自由至关重要。自由软件使我们能够控制我们使用的技术，让技术造福个人和社会。”

这个人对时间有精准的把控，他会把自己每天的工作和用时记录成册，时间就像经过严格控制的沙漏一样，在他身边缓缓流过，他仿佛能感知时间的流失。这样的自控能力、学习和工作效率让人叹为观止，常被我奉为天人！每当偷懒时总是对自己说，你看看人家柳比歇夫子是怎么干的！当然，咱不是天才，有时候懒还是要偷的……

为什么要编程呢？第一，编程可以帮助我们更加轻松地完成工作。第二，编程可以帮助我们更好地思考，因为编程本身就是思考的镜子。思考最大的价值在于你可以用不同的方式去看待世界，看待世界上发生的事情，而不是局限在自己的圈子里自怨自艾。烦的时候想想宇宙洪荒、大江东去，你的烦恼也许就随风而去了。

1979年年底，乔布斯去施乐公司参观他们的技术成果。施乐给乔布斯展示了三个项目，一个是面向对象编程，一个是计算机网络系统，最后一个才是图形用户，也是最吸引乔布斯的项目。“那是我见过的最漂亮的东西，很快我就意识到所有的计算机都应该变成这样。”
这三项科技成果在未来的几十年内都焕发出了最璀璨的光华，但是非常可惜，这些光辉都不属于施乐。

对此，乔布斯的建议是，构建一个团队只需找到才华横溢、不甘平庸的5个人，让他们形成合作关系，然后，他们会找到更多同一档次的人，自动扩展团队，并做出伟大的成就。

《黑客与画家》这本书的中译本出版于2011年4月，它的作者是美国互联网界“创业教父”，哈佛大学计算机博士PauI Graham，它的译者是著名bIogger阮一峰先生。

所以，正在流行的东西并不一定值得投入，流行感冒倒是流行，也没人追啊……

做技术需要终身学习，如果你是个学习狂，那么恭喜你找到了一份完美的工作。有一次，一个工程师告诉我，每次感到恐慌的时候，他就开始学习，掌握了一门又一门语言和技术。最后他成为了一个通才之上的专才。书到用时方恨少，事非经过不知难，有时间就学点东西，没坏处，还能预防老年痴呆。

如果你做的互联网产品服务了千万个用户，你做的这个产品的价值也就放大了千万倍。如果你在做这样的工作，那么你就最大化了自己的价值，财富也会随之而来。如果没有，就去找这样的工作。

因为无所事事使人感到孤独和消沉

### 工具

在Unix/Linux服务器端编辑和修改文件也离不开Vim，另外，由于我个人的工作环境是Mac，所以改个文本文件、查个代码之类的，也就用Vim顺手做了。

Mac的最大优势是——GUI和命令行的完美结合，

SheII是Linux/Unix的一个外壳，你理解成衣服也行。它负责外界与Linux内核的交互，接收用户或其他应用程序的命令，然后把这些命令转化成内核能理解的语言，传给内核，内核是真正干活的，干完之后再把结果返回用户或应用程序。

### 职场

所以我们就知道，人才是留不住的，除非他们想自己留下，不断地引入新生血液，培养他们，即使他们两年后会义无反顾地离开……

你的薪水还好吗
不要纠结和执着于当前的薪水，尤其是在职业生涯的前5年，这段时间是你提升能力的最佳时期，你在一个地方工作的唯一理由就是能够提升自己的能力，当然，这是在完成公司工作的基础之上。如果你能找到一个感兴趣、完成业绩和提升能力同步进行的地方，恭喜你，好好待着吧，你要做的就是拼命地学习和实践，并且记得抬头看路。

世界上永远存在一些看起来很牛的人和实际上很牛的人，看起来很牛的人往往口若悬河，长篇累牍，但是一遇到问题和细节就原形毕露。而那些真正拥有知识的人，其实看起来也很牛，但是牛得比较低调，他们知道自己的能力范围和边界，他们会努力扩大能力范围和突破边界，但是一旦真正在能力之外，他们要么什么都不说，要么毫不犹豫地说不知道，这一点是那些万事通们永远无法理解的。

我觉得至少不要一年一跳，虽然跳槽是加薪升职的最快途径，但不一定是最好的，因为短暂的停留让你在每个领域都浅尝辄止，你会成为一个平庸的半瓶子醋砖家，总有一天会不招人待见而被迫用余生砌砖。当然，如果你的跳槽只是为了磨练意志，增长经验，锻炼身心，那就另当别论了。

为了自己的梦想和能力提升的加班是不可避免了，为了参与一个伟大产品诞生的加班也是可以接受的。但是，为了捞加班费和磨洋工的加班是可耻的，因为你在浪费自己的生命！

其实想清楚了人生就这么点事，舍得获得，挣得花得，见自己，见天地，见众生，最后尘土相随。

第三次面试就是来到现在这家公司，细节不表，一面之下就足足工作了8年，直到今天。

所以，用“熟悉、用过、深入了解”就好，这样大家交流起来都有退路。这时候有同学要问了：“如果我足够牛了，也不能用精通么？”据我的了解，足够牛的人，基本都不用写简历。

在工作经历一栏，一般都是列出工作单位、职务和相关的工作成果。我看过很多简历，最多的内容就是这部分，求职者会详细描述自己开发过的那些产品和项目，包括项目介绍、架构、组织、自己的职责和负责的模块等。

突出重点，不要罗列所有项目。首先选择一个自己最喜欢最了解的项目，重点描述和准备，因为很多面试官都会让你阐述自己最得意的产品或案例。其余项目有亮点则写，没有则一带而过即可，放心，没人会关注你5年前使用过的某个技术。