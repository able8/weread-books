## 一本书读懂边缘计算
> 史皓天

### 作者简介

对边缘计算、5G、物联网的发展方向有着自己的理解。致力于边缘计算领域知识传播，在各大平台边缘计算领域累计发布文章超过1000篇。

### 序

“天时不如地利，地利不如人和。”
——《孟子·公孙丑下》
孟子所表述的意思是，如果想做好一件事，需要具备“天时、地利、人和”的三个条件，而边缘计算的发展也正是如此。

经过近10年的发展，云计算已经从一开始大家持怀疑态度的概念，发展到完全融入甚至改变了我们日常生活方方面面的一种实用技术。

云计算企业的加持下，人们的便携式终端设备逐渐由普通设备转变成一种处理云服务业务的高速缓存。那么成功的云计算公司管理者自然会问，如何让自己的云服务业务用户体验更好？

边缘计算的基本理念是将计算任务在接近数据源的计算资源上运行，是个连续统，可以有效减少数据传输带宽，减小计算系统的延迟，缓解云计算中心的压力，提高可用性，并能够有效保护数据安全和隐私。

### 前言

我上网搜索边缘计算的学习资料，发现寥寥无几，于是自己开始啃书本、看国外视频学习边缘计算，把自己学习边缘计算的心得分享到网络上。分享学习心得是为了日后再复习，但无心插柳柳成荫，分享的几篇文章被CSDN推荐到了首页，有一篇还置顶了，无意间火了，这才发现，对边缘计算感兴趣的朋友相当多。

边缘计算社区定位是促进边缘计算领域知识传播，分享传播边缘计算相关资讯、前沿观点，客观、中立的社区。

通过做边缘计算社区，我接触到了各行各业的朋友，接触到的边缘计算领域的从业者、感兴趣的人大抵可分三大类，一类是学术界，第二类是产业界，第三类是研究界，产学研三方对边缘计算看法不一样，态度也不一样

### 1.1 边缘计算简析

边缘计算可以帮助企业近乎实时地分析信息，并围绕物联网（IoT）设备和数据创造新的价值。

### 1.1.1 边缘计算的概念

边缘计算（Edge Computing），是指在网络边缘执行计算的一种新型计算模型，边缘计算操作的对象包括来自于云服务的下行数据和来自于万物互联服务的上行数据，而边缘计算的边缘是指从数据源到云计算中心路径之间的任意计算和网络资源，是一个连续统。并发表了“Edge Computing: Vision and Challenges”一文，第一次指出了边缘计算所面临的挑战，该文在三年内被他引1360多次。

边缘计算是一种分散式运算的架构，将应用程序、数据资料与服务的运算，由网络中心节点移往网络逻辑上的边缘节点来处理。边缘计算将原本完全由中心节点处理大型服务加以分解，切割成更小与更容易管理的部分，分散到边缘节点去处理。边缘节点更接近于用户终端装置，可以加快资料的处理与传送速度，减少延迟。

这得益于它们类似分布式计算的“多个小脑+一个大脑”的构造。边缘计算也属于一种分布式计算：在网络边缘侧的智能网关上就近处理采集到的数据，而不需要将大量数据上传到远端的核心管理平台。

手被开水烫了，将手收回来的过程是由神经末端直接处理的非条件反射。如果把信号传到大脑，然后大脑再下发指令做动作，耗时太长，只会使伤害加重。这里的大脑就相当于“云计算”，神经末端就相当于“边缘计算”。

这时，你开始划分部门，成立了财务部、市场部、产品部、销售部。每个部门设置一个部门领导。大家直接和部门领导汇报，遇到重要的事情，部门领导再向你汇报。整个公司的运行架构如图1-3所示。公司里，管理层的角色就相当于是“云计算”，是整个公司的核心，负责全局；部门领导的角色就相当于“边缘计算”，在部门层面处理事务，负责比较具体的业务。

### 1.1.2 边缘计算的应用场景

将VR/AR的计算任务卸载到边缘服务器或移动设备上，可以降低平均处理时延。边缘应用快速处理用户位置和摄像头图像数据，给用户实时提供辅助信息，通过本地化处理增强体验。

在智能交通中，边缘服务器上通过运行智能交通控制系统来实时获取和分析数据，根据实时路况来控制交通信息灯，以减轻路面车辆拥堵等。

边缘计算应用于工业互联网有3个优势。
1）改善性能，工业生产中常见的报警、分析等应用在靠近数据生产者的地方处理和决策会更快，通过减少与云数据中心的通信可以增加边缘处理的弹性。
2）保证数据安全和隐私，可以避免数据传输到共享数据中心后数据暴露等带来的安全隐私问题。

### 1.2 边缘计算的前世今生

相对于云计算带来的“云端”海量计算能力，边缘计算实现了资源和服务向边缘位置下沉，从而降低交互时延、减轻网络负担、丰富业务类型、优化服务处理，提升服务质量和用户体验。

### 1.2.1 CDN——从缓存到内容分发

CDN是构建在网络之上的内容分发网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。CDN的关键技术主要有内容存储和分发技术。

Akamai从MIT获得了某些知识产权的独家许可，而后于1998年秋开始了CDN商用的开发工作。Akamai公司的早期员工都是在MIT参与过CDN商用项目的学生。Akamai的第一个大客户是雅虎，目前Akamai是全球最大的CDN服务提供商。这就是CDN最初的故事。

CDN强调内容的备份和缓存，而边缘计算的基本思想则是功能缓存（Function Cache），这实际上是借鉴了CDN的基本思想。所以CDN是边缘计算的最初的原型

### 1.2.2 微云——盒子里的数据中心

微云的主要技术支撑是虚拟机合成和OpenStack，虚拟机合成实现将计算任务卸载到微云，OpenStack提供虚拟计算和存储服务的资源。

微云可以直接运行在终端上，比如车辆、飞机等。此时的“边缘计算”强调下行，即将云服务器上的功能下行至边缘服务器，以减少带宽和时延。

3）临近性：它接近相关的移动设备，位于云端和服务器中间。将云下沉到离用户更近的地方。甚至可以直接运行在车辆、飞机等终端上。

### 1.2.3 雾计算——雾是接近地面的云

雾计算（Fog Computing）、移动边缘计算（Mobile Edge Computing，MEC）。
2012年，思科公司提出了雾计算概念，将其定义为迁移云计算中心任务到网络边缘设备执行的一种高度虚拟化的计算平台。云计算架构将计算从用户侧集中到数据中心，让计算远离了数据源，但也带来计算延迟、拥塞、低可靠性和易受攻击等问题，于是在云计算发展了大约10年的2015年，修补云计算架构的“大补丁”——雾计算开始兴起了。

雾计算将处理能力放在包括IoT设备的LAN上面。这个网络内的IoT网关，或者说是雾节点用于数据收集、处理、存储。多种来源的信息收集到IoT网关里，处理后的数据发送回需要该数据的设备。雾计算的特点是处理能力强的单个设备接收多个端点来的信息，处理后的信息发回需要的地方。和云计算相比延迟更短。

计算方案是集中化的雾节点（或者IoT网关）不断从家中的传感器收集信息，检测到垃圾的话就启动吸尘器

边缘计算的解决方案里是传感器自己判断有没有垃圾，来发送启动吸尘器的信号。

### 1.2.5 边缘计算大事记

2019年9月，边缘计算开源项目群花怒放。

StarlingX是适用于裸机、虚拟机和容器化部署环境的完整边缘云基础设施平台，适用于对高可用性（HA）、服务质量（QoS）、性能和低延迟等有严格要求的应用场景。

KubeEdge的名字来源于Kube+Edge，顾名思义就是依托Kubernetes的容器编排和调度能力，实现云边协同、计算下沉、海量设备接入等，将Kubernetes的优势和CloudNative云原生应用管理标准延伸到边缘，解决当前智能边缘领域用户所面临的挑战。

### 1.3.1 网络技术

传统的、基于DNS的服务发现机制，主要应对服务静态或者服务地址变化较慢的场景下。当服务变化时，DNS的服务器通常需要一定的时间以完成域名服务的同步，在此期间会造成一定的网络抖动，因此并不适合大范围、动态性的边缘计算场景。

### 1.3.2 隔离技术

目前在云计算场景下主要使用VM虚拟机和Docker容器技术等方式保证资源隔离。边缘计算可汲取云计算发展的经验，研究适合边缘计算场景下的隔离技术。

### 1.3.4 算法执行框架

除了操作系统之外，边缘计算还需要一个边缘的执行框架，它可以动态地允许AI包在云端运行（例如来自Facebook的PyTorch和来自谷歌的TensorFlow）。


随着人工智能的快速发展，边缘设备需要执行越来越多的智能算法任务，例如家庭语音助手需要进行自然语言理解、智能驾驶汽车需要对街道目标检测和识别、手持翻译设备需要翻译实时语音信息等。在

### 2.1 计算卸载

边缘计算中的计算卸载是将移动终端的计算任务卸载到边缘云环境中，解决了设备在资源存储、计算性能以及能效等方面存在的不足。

### 2.2 计算迁移

边缘计算中的计算迁移是指，在网络边缘处，对海量边缘设备采集或产生的数据进行部分或全部计算的预处理操作，对无用的数据进行过滤，从而降低数据传输的带宽需求。

### 2.3 边缘缓存

为了避免上述问题，在边缘计算网络中部署缓存成为行业研究的热点。边缘缓存也成为边缘计算的关键技术之一。

边缘缓存能使用户从小基站或其他设备处获得请求的内容，实现了内容可在本地使用，而不需要通过移动核心网和有线网络从内容服务提供商获取内容。从而减少无线需求容量和可用容量之间的不均衡，缓解了5G网络的回传瓶颈，提高时延保障，降低网络能耗。

### 3.1.1 5G来了

华为的创始人任正非曾这样描述5G：5G的带宽是4G的20倍，是2G的1万倍；传送每个比特的耗电量相比4G下降了10倍；硬件设备体积下降到1/3。5G基站非常小巧，只有20公斤左右的重量，就像装文件的手提箱那么大，可以随意地装在杆子上、挂在墙上；

### 3.4.2 边缘计算拓展云的边界

由此来看，云计算和边缘计算是一种共生和互补的关系，并不会出现谁取代谁的问题。

### 3.5.1 闲谈雾计算

雾计算（Fog Computing）是云计算（Cloud Computing）的延伸概念，主要用于管理来自传感器和边缘设备的数据，将数据、（数据）处理和应用程序集中在网络边缘的设备中，而不是全部保存在云端数据中心（如图3-33所示）。

相比于云计算，雾计算更为贴近用户，就在你我身边。将数据从云端导入和导出实际上比人们想象的要更为复杂，由于接入设备越来越多，在传输数据、获取信息时，带宽就显得不够用了，这就为雾计算的产生提供了空间。

### 4.1.2 视频监控

● 海量视频传输到云计算中心对网络带宽要求较高，实时性得不到保证；
● 视频数据处理任务集中在云平台执行，增加了云计算中心视频服务器的处理负担；
● 存储和管理大量冗余视频数据，增加了存储节点能耗。
现有云计算相关技术不能高效处理海量边缘视频数据。因此，催生了边缘大数据处理模式，即边缘计算。

边缘计算+视频监控技术其实是构建了一种基于边缘计算的视频图像预处理技术，通过对视频图像进行预处理，去除图像冗余信息，使得部分或全部视频分析迁移到边缘处，由此降低对云计算中心的计算、存储和网络带宽的需求，提高视频分析的速度

如果将这些摄像头采集到的原始数据未经处理直接上传到云计算中心，一方面会占用很多不必要的存储空间，另一方面会给网络带宽资源带来了巨大的负担。为此，在视频数据上传至云计算中心之前，应先在边缘设备上对其执行预处理，在监控摄像头上加入计算能力，当检测到视频画面中有运动目标时，对监控信息进行存储，如果没有运动目标就不存储。这样可以节省大量的存储空间，而且可以减轻数据传输对网络带宽的压力。

在基于边缘计算的人脸识别应用场景当中，通过前端抓拍+边缘计算分析的前后端智能相结合的模式，将人脸识别智能算法前置，在前端摄像机内置高性能智能芯片，通过边缘计算，将人脸识别抓图的压力分摊到前端，解放云计算中心的计算资源，以集中计算资源做更高效的分析。

### 4.2 智能交通

对于交通拥堵，边缘计算可以实时分析处理监测到的交通状况，根据车流量车流速度来判断是否会发生拥堵。实时提供最优路线，并调整拥堵地段的交通状况，如调整红绿灯，快速改善拥堵状况，并把重要数据返回云端。借助边缘计算、物联网等技术快速发展的城市智能交通如图4-7所示。

### 4.5.3 边缘计算在智能家居中的应用

智能家居的网关组件也可以认为是一种边缘计算。对于在同一网关内的智能组件，网关可以处理这些组件收到的信息并根据用户设置或者习惯做出决策，控制执行组件执行相应动作。

智能家居主要通过云端来连接、控制家中的智能设备，很多家庭局域网内的设备互动也通过云计算来实现。但设备过度依赖云平台也会带来诸多问题，比如，家里一旦出现网络故障，设备就很难进行控制。另外，通过云平台控制家中的设备，有时候响应速度慢，会带来很强的延迟感，并且随着智能家居设备品类的增加这一不良体验会越来越频繁。

### 5.1.1 中国移动——国内5G边缘计算领军者

“5G+AICDE”是指：将5G作为接入方式，与人工智能（AI）、物联网（IoT）、云计算（Cloud Computing）、大数据（Big Data）、边缘计算（Edge Computing）等新兴信息技术深度融合，打造以5G为中心的泛智能基础设施。

### 5.2.1 阿里云——后来者居上

2018年3月28日，在云栖大会·深圳峰会上，阿里云宣布2018年将战略投入边缘计算技术领域，并推出首个IoT边缘计算产品Link Edge，将阿里云在云计算、大数据、人工智能的优势拓宽到更靠近端的边缘计算上，打造云、边、端一体化的协同计算体系

2019年7月24日，阿里云发布国内首个全域边缘节点（ENS）服务，以300多个边缘节点算力基本覆盖全国省会城市，同时支持热门地区三线城市，具备高效、低成本、低时延特点，将成为5G时代计算基础（如图5-11所示）。

ENS（Edge Node Service）是基于靠近终端和用户的节点提供边缘的计算分发平台服务，使客户可以轻松地将自己业务中适合下沉到边缘的模块放到边缘运行，建立云边协同的分布式边缘架构，从而具备低时延和低成本的优势，减轻云计算中心的压力。

### 6.1 冷思考——边缘计算是个筐

“边缘计算”不仅暗含了会有“中心计算”，更进一步说明，在中心和边缘之间会有计算的分工协作和网络连接，否则“边缘”本身就不存在了

边缘计算的应用场景，可以大致分为：a.必须它干的，比如实时控制等；b.应该而且比云计算干得好的；c.能干但不如云计算干得好的；d.不应该它干的，比如机器学习训练。

私有云就是相对于公有云而言的一种边缘计算，混合云就是处在中心（公有云）和边缘（私有云）之间一种计算的分工协作模式。

从计算角度看，边缘计算的外围还会有更边缘的计算，比如“雾计算”“超级实时计算”“微计算”等。边缘计算与云计算之间，应该还会有新的计算节点出现，比如“汇聚计算”“局域计算”“小区计算”“城域计算”等。

从边缘角度看，有了边缘计算理论，当然还应有边缘数据中心、边缘网络、边缘存储、边缘服务器、边缘分发、边缘芯片、边缘软件、边缘算法、边缘大数据和边缘智能等。PC和智能手机，早就是互联网的边缘计算节点了。

边缘计算的缺点也很明显，比如部署成本、运营管理、安全防护、分布协作和能耗等。

3）在什么地方做计算，是包括实时性和隐私控制等多种因素在内权衡的结果。仅仅为了实时性就放在边缘做计算吗？放在边缘做计算就一定比放在中心做计算划算吗？如果仅仅为了实时性，直接放在智能终端上做计算岂不是更快？

### 6.2 边缘计算对数字化转型的影响

在中心化的时代，数字化转型的大量数据由分层式的网络汇聚到云端，再由云端进行分析处理。这种数据处理方式的效率在面对海量数据时，效率将会非常低下。

### 6.4 漫谈边缘计算

随着云计算技术的发展和应用的普及，人们渐渐发现，这种全部集中模式的云计算对于下述的几类场景未必是最优的解决方案。

第一类是前端采集的数据量过大的场景。如果按照传统模式全部上传到云计算中心的话，成本高、效率低，典型的就是影像数据的采集和处理。

第二类是需要即时交互的场景。如果数据全部上传，在中央节点处理再下发，往往传输成本高、时延长，典型的就是无人驾驶场景。

第三类是对业务连续性要求比较高的场景。如果遇到网络问题或者中央节点故障，即便是短时间的云服务中断都会带来严重影响，典型的就是远程医疗场景。

一是边缘计算节点进行数据的初步处理，处理程序相对固定，主要目的是降低数据传输成本，提高运营效率。在本地将图像等非结构化数据转化为结构化信息，甚至引入人工智能等技术，将很多工作都部署在本地，既可以大大减少对传输资源的依赖和消耗，还能大幅提高本地的数据响应速度。

### 6.5 智能边缘计算——计算模式的再次轮回

事物的发展总是曲折的，循环往复，并在波浪中不断前进的。计算模式（Computing Paradigm）也不例外。如图6-10所示，如果我们回顾计算模式的发展历史，就会发现一个简单的规律：计算模式是在集中式计算和分布式计算之间不断摇摆，往复式发展前进的。

在大型机（Mainframe）时代，计算资源稀缺，很多人共享一台主机，计算是集中式的；到了个人计算（Personal Computing）时代，硬件变得小型化，价格低廉，人们可以拥有自己的个人设备，计算成为分布式的；在云计算时代，通过高速网络，人们可以共享云上海量的计算和存储资源，计算模式又回到集中式的。此时，人工智能蓬勃发展，云上提供的众多智能服务带来了智能云计算。而随着边缘计算的出现，计算模式再一次成为分布式的。现在，我们不仅有智能云，还有智能边缘。

其次，新的场景和应用需要对数据在本地进行处理。比如，自动驾驶和工业自动化对数据处理的实时性有很高的要求。数据传输带来的网络延迟往往无法满足实时性的要求，如果网络发生故障可能带来灾难性后果。再如，人们对个人隐私越来越关注，而很多数据（视频、图片、音频等）都包含大量的个人隐私。保护个人隐私的最好的方法就是在本地进行数据处理，不把个人数据传到网络上去。

除此之外，硬件的快速发展使得智能边缘计算成为可能。随着AI算法的日益成熟，人们开始设计制造专用的AI芯片，特别是专门用于深度学习模型推理的AI芯片，这些AI芯片不仅数据处理能力强大，而且尺寸小、功耗低、价格便宜，可以应用到各种边缘设备上，为智能边缘计算提供了坚实的硬件基础。

### 参考文献

[1]施巍松，孙辉，曹杰，等. 边缘计算：万物互联时代新型计算模型[J]. 计算机研究与发展，2017，54（5）：907-924.

### 边缘计算社区简介

边缘计算社区成立于2018年3月，连接20000余名边缘计算机爱好者。立足边缘计算领域，促进边缘计算领域知识传播。社区通过社区线上活动——边缘计算直播，邀请边缘计算专家分享新知；通过社区线下活动