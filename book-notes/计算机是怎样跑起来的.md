## 计算机是怎样跑起来的
> 矢泽久雄

### 前言

如果仅仅把技术当作一个黑盒，只把时间花在学习其表面上，而并没有探索到其本质，就绝不应该认为自己已经“懂”了。不懂的话，做起来就会感到没意思，也就更不会产生想要深入学习的欲望了。若每日使用的都是些不知其所以然的技术，就会渐渐不安起来。

面对为数不多的技术，我们可以从容地把时间花在学习计算机的基础知识上。而这些基础知识，即使到了今天也完全没有变化。因此，即便面对的是复杂的最新技术，一旦把它们回归到计算机的基础知识上，就变得可以轻松理解了。就算是和年轻的工程师们阅读同样的技术手册，我们领会其中的要点、抓住其本质的速度也要快得多。

其实不仅是计算机，其他学问亦是如此。首先要划出一个“知识的范围”，精通一门学问所必知必会的知识都在这个范围内。其次是掌握该范围内每个知识点中“基础中的基础知识”。最后是能独当一面的“目标”，即掌握了这些知识可以做什么。

### 第1章 计算机的三大原则

通常将为了便于计算机处理而经过数字化处理的信息称作编码。
解释

存储汉字时，字符编码不同，汉字所占用的字节数也就不同。在GBK字符编码下，一个汉字占用2个字节。而在UTF-8字符编码下，一个汉字占用3个字节。

### 1.1 计算机的三个根本性基础

计算机的三大原则吧。
1．计算机是执行输入、运算、输出的机器
2．程序是指令和数据的集合
3．计算机的处理方式有时与人们的思维习惯不同

### 1.2 输入、运算、输出是硬件的基础

但是无论是多么复杂的功能，都是通过组合一个又一个由输入、运算、输出构成的流程单位来实现的

### 1.3 软件是指令和数据的集合

无论是多么复杂的程序，都只不过是指令和数据的集合。

### 1.5 只要理解了三大原则，即使遇到难懂的最新技术，也能轻松应对

计算机是执行程序的机器。程序是指令和数据的集合。为了使互联网上相互连接的计算机能通过程序协同工作，微软公司采用了SOAP以及XML规范。SOAP是关于调用指令的规范，XML则是定义数据格式的规范。

### 1.6 为了贴近人类，计算机在不断地进化

面向组件编程的方法是通过将组件（程序的零件）组装到一起完成程序；面向对象编程的方法是先如实地对现实世界的业务建模，之后再把模型搬到程序中。使用符合人类思维习惯的编程方法，可以实现高效率的开发。

### 2.1 制作微型计算机所必需的元件

制作微型计算机所需的基础元件只有3个，CPU、内存和I/O，

为了驱动CPU运转，称为“时钟信号”的电信号必不可少。这种电信号就好像带有一个时钟，滴答滴答地每隔一定时间就变换一次电压的高低（如图2.2所示）。输出时钟信号的元件叫作“时钟发生器”。时钟发生器中带有晶振，根据其自身的频率（振动的次数）产生时钟信号。时钟信号的频率可以衡量CPU的运转速度。

电阻是用于阻碍电流流动、降低电压值的元件。

### 4.6 特殊的程序流程——中断处理

中断处理是指计算机使程序的流程突然跳转到程序中的特定地方，这样的地方被称为中断处理例程（Routine）或是中断处理程序（Handler），而这种跳转是通过CPU所具备的硬件功能实现的。

在Z80 CPU中有[插图]和[插图]两个引脚，它们可以接收从I/O设备发出的中断请求信号[插图]。以硬件形式连接到CPU上的I/O模块会发出中断请求信号，CPU根据该信号执行相应的中断处理程序。在诸位使用的个人计算机上，中断请求信号是由连接到周边设备上的I/O模块发出的。例如每当用户按下键盘上的按键，键盘上的I/O模块就会把中断请求信号发送给CPU。CPU通过这种方式就可以知道有按键被按下，于是就会从I/O设备读入数据（如图4.14所示）。CPU并不会时刻监控键盘是否有按键被按下。

### 6.3 要点3：了解数组的应用——作为典型算法的数据结构

数组是数据结构的基础，只要使用数组就能通过程序实现各种各样的算法以处理大量的数据。

“冒泡排序”这种典型算法，将存储在数组中的1000个数字按降序排列吧。程序如代码清单6.5所示。在冒泡排序算法中，需要从头到尾地比较数组中每对儿相邻的元素的数值，然后反复交换较大的数值和较小的数值的位置。

即通过使用数组和for语句，就能编写出实现了线性搜索和冒泡排序算法的程序。

### 6.6 要点6：了解结构体的组成

要想理解用C语言程序实现链表和二叉树的方法，就必须先了解何谓“结构体”。所谓结构体，就是把若干个数据项汇集到一处并赋予其名字后所形成的一个整体。

### 7.5 观点3：面向对象编程是适用于大型程序的开发方法

面向对象编程是适用于大型程序的开发方法

### 7.12 在Java和．NET中有关OOP的知识不能少

Java和．NET其实是位于操作系统（Windows或Linux等）之上，旨在通过隐藏操作系统的复杂性从而提升开发效率的程序集，这样的程序集也被称作“框架”（Framework）。框架由两部分构成，一部分是负责安全执行程序的“执行引擎”，另一部分是作为程序组件集合的“类库”（

### 8.1 数据库是数据的基地

1970年美国IBM公司的Codd先生设计发明了关系型数据库。现在关系型数据库被广泛应用，以至于一提到数据库就默认是关系型数据库。在

### 8.5 用主键和外键在表间建立关系

为了在表间建立关系，就必须加入能够反映表与表之间关系的字段，为此所添加的新字段就被称为键（Key）。首先要在各个表中添加一个名为主键（Primary Key）的字段，该字段的值能够唯一地标识表中的一条记录（如图8.9所示）。

在销售记录表上，还要添加顾客ID和商品ID字段，这两个字段分别是另外两张表的主键，对于销售记录表来说，它们就都是“外键”（Foreign Key）。通过主键和外键上相同的值，多个表之间就产生了关联，就可以顺藤摸瓜取出数据。

### 8.6 索引能够提升数据的检索速度

索引仅仅是提升数据检索和排序速度的内部机制。一旦在字段上设置了索引，DBMS就会自动为这个字段创建索引表（如图8.12所示）。

索引表是一种数据结构，存储着字段的值以及字段所对应记录的位置。例如，如果在顾客表的顾客姓名字段上设置了索引，DBMS就会创建一张索引表（如图8.13所示），表中有两个字段，分别存储着顾客姓名和位置（所对应的记录在数据文件中的位置）。与原来的顾客表相比，索引表中的字段数更少，所以可以更快地进行数据的检索和排序。当查询数据时，DBMS先在索引表中进行数据的检索和排序，然后再根据位置信息从原来的数据表中把完整的记录取出来。索引所起的就是“目录”的作用。与图书的目录一样，数据库的索引也是一种能够高效地查找目标数据的机制。

既然索引能够提升检索和排序的速度，那么在所有表的所有字段上都加上索引不就好了吗？实际上并不能这样做。因为一旦设置了索引，每次向表中插入数据时，DBMS都必须更新索引表。提升数据检索和排序速度的代价，就是插入或更新数据速度的降低。因此，只有对那些要频繁地进行检索和排序的字段，才需要设置索引。在酒铺数据库这个例子中，只需要在顾客表的顾客姓名字段和商品表的商品名称字段上设置索引就足够了。如果表中充其量也就只有几千条记录，那么即使完全不使用索引，也不会感到检索或排序速度有多慢。

### COLUMN 来自企业培训现场

笔者并不是讨厌Java。在Java的框架之上，若是进行面向对象编程，既可以高效地开发大规模的程序，又可以使其处于易于维护的状态之中。但是这些优点只体现在编写实际的业务程序上。对于缺乏计算机基础知识的新人而言，笔者大力推荐C语言。因为它既能够使程序员感知到计算机的构造，又迫使程序员殚精竭虑地去思考如何才能亲手实现算法和数据结构。

以C语言为基础发展出了C++语言，而Java又是以C++为基础开发出的编程语言。如果精通了C语言，不但能够理解Java的优点（高效开发和易于维护），而且能够平滑地过渡到Java的语法结构上。虽然在新人培训上也是有时间限制的，但正所谓欲速则不达。笔

### 第9章 通过七个简单的实验理解TCP/IP 网络

一旦了解了原理，也就能更加灵活地使用网络了。

### 9.2 实验1：查看网卡的MAC地址

以太网使用了一种略显粗糙的方法连接LAN内的计算机（如图9.2所示）。以太网中的每台计算机都需要先确认一件事：在网线上有没有其他的计算机正在传输电信号，也就是说要先确保没有人在占用网络，然后才能发送自己想传输的电信号。谁先抢到了网线的使用权，谁就先发送。万一遇到了多台计算机同时都想发送电信号的情况，只需要让这些计算机等待一段长度随机的时间后再重新发送相同的电信号即可。这套机制叫作CSMA/CD（CarrierSense Multiple Access with Collision Detection，带冲突检测的载波监听多路访问）。所谓载波监听（CarrierSense），指的是这套机制会去监听（Sense）表示网络是否正在使用的电信号（Carrier）

在以太网中，发送给一台计算机的电信号也可以被其他所有的计算机收到。一台计算机收到了电信号以后会先做判断，如果是发送给自己的则选择接收，反之则选择忽略。

### 9.3 实验2：查看计算机的IP地址

假如在互联网中只能使用MAC地址，那么会发生什么呢？在接入互联网的数量众多的计算机中，只有尚未进行任何分组处理的编号（MAC地址）。这样的话，仅仅是寻找信息的发送目的地就要花费大量的时间。

### 9.8 实验7：查看IP地址和MAC地址的对应关系

在互联网的世界中，到处传输的都是附带了IP地址的数据。但是能够标识作为数据最终接收者的网卡的，还是MAC地址。于是在计算机中就加入了一种程序，用于实现由IP地址到MAC地址的转换，这种功能被称作ARP（Address Resolution Protocol，地址解析协议）。

ARP的工作方式很有意思。它会对LAN中的所有计算机提问：“有谁的IP地址是210.160.205.80吗？有的话请把你的MAC地址告诉我。”通常把这种同时向所有LAN内的计算机发送数据的过程称作“广播”（Broadcast）。通过广播询问，如果有某台计算机回复了MAC地址，那么这台计算机的IP地址和MAC地址的对应关系也就明确了。ARP的工作流程也是自动进行的，诸位并不会意识到。

如果为了查询MAC地址，每回都要进行广播询问，那么查询的效率就会降低。于是ARP还提供了缓存的功能，当向各个计算机都询问完一轮之后，就会把得到的MAC地址和IP地址的对应关系缓存起来（临时保存在内存中）。

### 9.9 TCP的作用及TCP/IP网络的层级模型

一直把协议和约束等同起来，但恐怕还是会有人觉得协议这个词难以理解吧。正因为发送者和接收者都遵循了相同的约束，双方才能相互发送数据。为了能够在约束下收发数据，操作系统将实现了TCP和IP等协议的程序作为自身的一部分功能提供。遵

### 10.4 适用于互联网的公开密钥加密技术

在公开密钥加密技术中，用于加密的密钥可以公开给全世界，因此称为“公钥”，而用于解密的密钥是只有自己才知道的秘密，因此称为“私钥”。

### 10.5 数字签名可以证明数据的发送者是谁

数字签名可以证明数据的发送者是谁

一种公开密钥加密技术的实际应用——数字签名。